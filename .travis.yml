language: python

python:
  - 2.6
  - 2.7
  - 3.2
  - 3.3
  - 3.4
  - pypy

script:
  - make ckpatch

before_install:
# Environment setup
  - sudo apt-get update -qq
  - sudo apt-get install -qqy xserver-xephyr x11-apps
# Setup XvFB
  - export DISPLAY=:99.0
  - sh -e /etc/init.d/xvfb start
# Ubuntu 12.04 uses old xcb-proto (xcb-proto 1.7)
# See https://github.com/travis-ci/travis-ci/issues/2046
  - wget http://xcb.freedesktop.org/dist/xcb-proto-1.10.tar.bz2
  - tar xjf xcb-proto-1.10.tar.bz2
  - pushd xcb-proto-1.10
  - ./configure --prefix=/usr
  - make -j3
  - sudo make install
  - popd

install:
# Installl requirements
  - if [[ ${TRAVIS_PYTHON_VERSION} == "3.4" ]]; then
      pip install -r requirements-3.4+.txt;
    elif [[ ${TRAVIS_PYTHON_VERSION} == "3.3" ]]; then
      pip install -r requirements-3.3.txt;
    else
      pip install -r requirements-2.6-3.2.txt;
    fi

notifications:
  - email: false
